### 产品需求文档

#### 首页

1. 搜索功能
   1. 用户点击搜索的input框，跳转到搜索页面
   2. 用户进入到搜索页面，可以手动的输入想要搜索的值；
   3. 在搜索页面，还有一个热门推荐的模块；
   4. 如果用户点击推荐相关的内容，则会根据搜索的关键字进行搜索；
   5. 热门搜索模块，支持用户手动展示和隐藏（taggle效果）
   6. 用户搜索后的记录，会保存到 *最近搜索*的模块中
   7. 最近搜索模块支持删除搜索过的相关记录；
   8. 在搜索页面支持返回上一页
   9. 在搜索后会进入搜索列表页面；
   10. 搜索列表页面如果点击返回，则跳转到首页；

#### 概要设计的概念

> 什么是概要设计？ 
>
> 答： 在产品需求分析会中提到的需求，前端和后端会根据此需求进行技术分析，思考如何实现，
>
> 并把这种实现方案写到方档中的这种流程，叫概要设计

#### 搜索模块的概要设计

1. 用户在首页（Home.vue）中点击搜索input框，执行一个onclick事件

2. 该事件的名称命名为 handleSearchClick;

3. 该事件执行vue-router路由跳转，跳转到 搜索页面中（Search.vue）

4. 使用的跳转路由方法是 this.$router.push({name:'Search',query:{searchFrom:"Home"}})

5. 跳转时要用query进行传参，参数searchFrom代表的是从哪一个页面跳转过来

6. 在搜索（Search.vue）页面中,需要添加两个模块

7. 一个是热门搜索，一个是最近搜索

8. 热门搜索中默认展示热门推荐 

9. 我们需要在created钩子函数中，调用 /search/list/key接口 

10. 前端要把/search/list/key接口封装到api.js中，方便统一的维护；

11. 封装的接口名为 getSearchKeyList();

12. 在created钩子函数中，通过async,await语法，进行接口调用；

13. 调用的格式为：

    ```javascript
    async created(){
        //一般情况下，如果你这个列表不传任何的值，他就是默认是热门推荐；
        let hostlist = await this.getSearchKeyList();
        // hostlist 数据结构如下；
        let hostlist = {
            status:1,
            msg:'success',
            data:[
                {
                    id:1,
                    value:'保温壶'
                },
                {
                    id:2,
                    value:'高清线hdmi'
                },
                {
                    id:3,
                    value:'餐桌'
                },
                {
                    id:4,
                    value:'电压力锅'
                },
            ]
        }
    }
    ```

13. 热门搜索的隐藏和展示功能，需要记录状态，用户在设置隐藏后，进入该页面后，不需要在调用服务端的接口；

14. 那么， 这个需求就应该用localStorage变量存储

15. 最近搜索模块实现方案：

16. 也是利用localStorage来做；  （搜索记录相关的需求，是放在localStorage中的）

17. *最近搜索*中的删除按钮需要设置一个onclick事件

18. 该事件名称为alertMessagePopup()

19. 通过该事件，来弹出是否删除的弹层；

20. 如果用户点击取消，则调用closePopup关闭弹层；

    ```javascript
    methods:{
        //关闭弹层
        closePopup(){
            this.popStatus = false;
        }
    }
    ```

    

21. 如果用户点击确认，则执行deleteSearchMark方法来删除localStroage中的搜索记录；

    ```javascript
    methods:{
       	alertMessagePopup(){
            //弹出弹层，提示用户是否确认删除搜索过的记录；
            this.popStatus = true;
        }
        //确认删除按钮的接口
        deleteSearchMark(){
            localStorage.setItem('searchMark','');
        }
    }
    ```

22. 用户手动输入搜索的内容，

23. 点击搜索按钮，执行search方法，该方法负责跳转到搜索列表页面（Goodslist.vue）

    ```javascript
    methods:{
        search:{
            this.$router.push({
                name:'GoodsList',
                query:{
                    keyword: this.searchValue
                }
            })
        }
    }
    ```

24. 在跳转路由时，用query方法传，因为列表页面支持分享功能
25. 用户点击返回按钮，封装back方法，执行跳转到上一页面；

```javascript
methods:{
    back(){
        this.$router.push({
            name:this.$route.query.searchFrom
        })
    }
}
```

