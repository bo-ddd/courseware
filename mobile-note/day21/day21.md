### day21

1. vue路由
   1. 单页面路由的配置
   2. 子路由的配置  children;
2. 动态路由
   1. 根据routes动态渲染路由列表；
3. 角色管理
   1. 实现方案：在route中分别针对每一个路由配置，进行meta设置，在meta中设置identity标识，
   2. identify必须要设置为数组，因为有可能多个角色可以看到当前路由
   3. 在此项目中如果角色过多，就会造成维护困难，为了解决此问题，最后采取一个方案，就是管理员来配置路由跳转，管理员来配置角色；供应商也可以配置角色，这种解决方案就是供应商或者管理员在页面中，进行动态配置相关路由，把添加的路由传给服务端，用户调用获取路由列表接口，拿到路由列表的数据，前端利用this.$router.addRoute()方法，把路由动态的添加到项目中，这种方案叫后端动态路由；

#### 面试题

1. 在你们的B端项目中，你们的路由是用哪种方案来配置的？

   1. 后端动态路由，因为项目中有动态添加角色这个功能；

2. 你们的项目中有角色管理这个模块吗？

   1. 如果你回答有，那么一定是服务端动态路由

3. 谈一谈对动态路由的理解？

   1. 在B端中，动态路由分为两种，一种是前端动态路由，一种是服务端动态路由；
   2. 前端动态路由适用于项目相对简单，没有动态添加角色时
   3. 如果有角色管理模块中，有动态添加角色这个功能时，就要用服务端动态路由；
   4. 服务端动态路由，是服务端把路由列表传给前端 ，前端用addRoute方法添加路由；
   5. 前端动态路由，是由前端把route.meta.identify写死，来渲染sidebar的一种方案；

4. 如何实现动态路由？

   1. vue-router中自带一个addRoute方法；

5. 角色管理模块中，你是如何根据角色权限判断路由的展示？

   1. 页面中调用getUserInfo接口，获取用户信息，用户信息中包含identify字段，
   2. 把这个identify字段和路由中的meta标签中的identify进行匹配，如果meta.identify中包含identify，则展示对应应的路由；

6. 你们的项目中用的是后端动态路由？为什么不用前端动态路由呢？

7. 你们的项目中用的是前端动态路由？为什么不用后端动态路由呢？

8. 如何配置子路由？

   1. 在routes中的路由中，把路由配置到某个路由的children字段中，就实现了子路由；
   2. 父路由中需要声明 router-view的标签用来接收子路由页面内容的展现；

9. 说一下对vuex的理解？

   1. vuex就是一个复杂版的单例，他适用于复杂组件之间的传参

      > 注： 这句话其实就是说，如果你当前组件层级嵌套过深，就应该用vuex

10. 你在vuex中通常会存一些什么状态？

    1. 在后台管理项目中，会把路由列表（routes）存到vuex中；

    2. 还有一些用户信息相关的；

    3. 订单状态相关的

       只要你的模块嵌套层级比较深，任何状态都可以存；

11. 在你的项目中，因为你做了动态添加角色功能，你能说一下你的动态路由和权限验证是如何做的吗？

    1. 供应商动态添加角色到服务端，服务把角色列表返回给前端，前端展示给供应商；（添加角色）
    2. 供应商进入权限管理页面，页面展示所有可维护角色，在当前角色中点击添加权限按钮
    3. 跳转到编辑权限列表页面，该页面展示路由列表，供应商只需要在路由列表的子项中进行打钩，就可以对应的配置权限；

12. 导航守卫可以做哪些事情 ？

    1. 通常在b端项目中，做一些权限判断；
    2. 如果没有权限，就跳转到没有权限页面；

13. vue-router中，传参方式有哪几种？及其应用场景？

    1. 两种，一种是query, 一种是params

    2. query适用于C端中，一些需要分享给用户，用户就可以打开的场景，比如我之前做的xxx商品详情；

    3. 在B端中，通常用params传，因为B端项目一般不需要分享；比如供应商自己的权限相关的模块，都用params来传；

    4. 除此之外，服务端也会进行校验，  服务端拿到token，他会拿到你是否什么身份，判断你当前调的接口是否有权限，

    5. 如果没有，通常会返回如下数据结构

       ```javascript
       var res = {
           status:403,
           msg:'您没有权限访问当前页面',
           data:[]
       }
       ```

14. axios拦截器的作用？
    1. 响应拦截器通常是用来做没有权限，或者没有登录时，跳转到其它页面
    2. 如果没有登录，就跳转到登录页面，
    3. 如果没有权限，就跳转到没有权限提示页面；
15. 请你说一下 axios和 导航守卫做权限判断的区别？

​		答：正常情况下，这两种场景都需要做权限判断；

​			导航守卫做权限判断实现的效果是，你还没有进入到这个页面时，我发现你没有权限，就把你给踢出去；

​			axios拦截器是你进入到了某个没有权限的页面后，在把你给踢出来；

16. 你在vue-cli中，你做过多页面搭建吗？

    1. 没有
    2. 答： 在vue-cli中没有搭建过，但是vue-cli底层是用webpack来写的，我之前用webpack来搭建过，我觉得要是让我配置，应该也比较简单；
    3. 这种答法，你告诉了面试官好多个知识点：第一，你知道多页面搭建的方法，你也知道vue-cli多页面的实现原理，你也配置过对应的其它项目，   
    4. 所以得出结论：你的项目经验很丰富；

    > 注： 如果面试官问你一些你没有做过的东西，你不要直接说没有，而是说做过类似的哪些东西

#### 其它

```vue
//Layout.vue
<template>
	<div>
        <Navigate data='routes'></Navigate>
    </div>
</template>

//Navigate.vue
<template>
	<Routes data='routes'></Routes>
</template>

//Routes.vue
<template>
	<div>
        <Route data="routes"></Route>
    </div>
</template>

//Route.vue
<template>
	<div>
        <div v-for="route in routes" :key="route.name" @click="navigate(route)">{{route.name}}</div>
    </div>
</template>


//Order.vue
<DefaultAddress></DefaultAddress>

//DefaultAddress.vue
<div>
    <Title>请填写收货地址</Title>
    <Icon type="arrow-right"></Icon>
</div>

//Title.vue
<div>
    <Level type=2 data='' size="24">
    	<FontSize size="24"></FontSize>
    </Level>
</div>
```

