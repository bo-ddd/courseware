#### 验证码模块

> 如何获取验证码？

一般情况下，服务端会提供一个名为 */captcha* 的接口，该接口返回的直接就是一张图片，他可以直接在img标签中直接使用，比如：

```html
//这样我们就可以在页面直接展示出验证码图片了；
<img src="/captcha">
```

> 点击验证码不刷新？

1. 当我们需要做一个点击验证码会更新验证图片时，通常我们会这么写：

```javascript
var oImg = document.querySelector('img');
oImg.onclick = function(){
    this.src = '/captcha'
}
//我们理想的情况是想让验证码刷新，但是我们发现并没有实现我们想要的效果；这是什么原因呢？
//这里我们需要引入一个新的概念：缓存；
```

> 缓存的概念

为了减少服务端的压力，我们应该在开发中尽可能的少调用接口，在浏览器中，他本身也遵循这一原则，浏览器是怎么实现少调用接口的呢？其实就是缓存，当我们在浏览网页的时候，有一些图片，或者音频等文件，如果每次从服务端来调用，会浪费大量的性能，此时，浏览器只在第一次把这些资源下载下来，放在系统盘中，一般情况下，是放在C盘里，第二次用户在打开这张图片时，浏览器会优先去这个C盘的缓存文件夹中找，如果找到了，就不会去访问服务端，并且在浏览器调试中的network中，此接口返回的状态码是304(not modify)，指的是文件没有变化；

> 如何解决验证码不刷新的问题？

```javascript
var oImg = document.querySelector('img');
oImg.onclick = function(){
    this.src = `/captcha?${Math.random()}`
}
//原理是:修改文件图片访问路径，因为缓存中存的图片地址是/captcha，我们第二次访问的时候，如果访问路径还是/capthca，那么该图片地址就会走浏览器缓存，但是如果设置成/captcha?asdfasdf, 下次用户访问浏览器后，图片的地址变成/captcha?123123123 此时浏览器是找不到被缓存的路径，所以验证码就会刷新了
```

